"use strict";(self.webpackChunkClientAPP=self.webpackChunkClientAPP||[]).push([[555],{9555:(G,m,i)=>{i.r(m),i.d(m,{CheckoutModule:()=>E});var d=i(1076),s=i(95),e=i(4769),h=i(6448),g=i(9366),a=i(3971),p=i(6814);function b(t,c){if(1&t){const r=e.EpF();e.TgZ(0,"li",4)(1,"div",5)(2,"button",6),e.NdJ("click",function(){const u=e.CHM(r).index,l=e.oxw();return e.KtG(l.OnClick(u))}),e._uU(3),e.qZA()()()}if(2&t){const r=c.$implicit,o=c.index,n=e.oxw();e.xp6(2),e.ekj("active",n.selectedIndex===o),e.xp6(1),e.AsE("",r.label," :",r.completed," ")}}function Z(t,c){if(1&t&&(e.TgZ(0,"div"),e.GkF(1,7),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",r.selected.content)}}let y=(()=>{var t;class c extends a.B8{constructor(){super(...arguments),this.linerModeSelected=!0}ngOnInit(){this.linear=this.linerModeSelected}OnClick(o){this.selectedIndex=o}}return(t=c).\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(t)))(n||t)}}(),t.\u0275cmp=e.Xpm({type:t,selectors:[["app-stepper"]],inputs:{linerModeSelected:"linerModeSelected"},features:[e._Bn([{provide:a.B8,useExisting:t}]),e.qOj],decls:4,vars:2,consts:[[1,"container"],[1,"nav","nav-pills","nav-justified"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[1,"d-grid"],[1,"nav-link","py-3","text-uppercase","fw-bold",3,"click"],[3,"ngTemplateOutlet"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"ul",1),e.YNc(2,b,4,4,"li",2),e.qZA(),e.YNc(3,Z,2,1,"div",3),e.qZA()),2&o&&(e.xp6(2),e.Q6J("ngForOf",n.steps),e.xp6(1),e.Q6J("ngIf",n.selected))},dependencies:[p.sg,p.O5,p.tP],styles:["button.nav-link[_ngcontent-%COMP%]{background:#efefef;border-radius:0;border:none;color:#333}"]}),c})();var v=i(9229),x=i(9866);function _(t,c){if(1&t){const r=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"h4"),e._uU(3,"Shiping Address"),e.qZA(),e.TgZ(4,"button",8),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.saveUserAddress())}),e._uU(5," Save as default Address "),e.qZA()(),e.TgZ(6,"div",9)(7,"div",10),e._UZ(8,"app-input-text",11),e.qZA(),e.TgZ(9,"div",10),e._UZ(10,"app-input-text",12),e.qZA(),e.TgZ(11,"div",10),e._UZ(12,"app-input-text",13),e.qZA(),e.TgZ(13,"div",10),e._UZ(14,"app-input-text",14),e.qZA(),e.TgZ(15,"div",10),e._UZ(16,"app-input-text",15),e.qZA(),e.TgZ(17,"div",10),e._UZ(18,"app-input-text",16),e.qZA()()()}if(2&t){const r=e.oxw();let o;e.Q6J("formGroup",r.checkoutForm),e.xp6(4),e.Q6J("disabled",!(null!=(o=r.checkoutForm.get("addressForm"))&&o.valid&&null!=(o=r.checkoutForm.get("addressForm"))&&o.dirty)),e.xp6(4),e.Q6J("label","First Name"),e.xp6(2),e.Q6J("label","Last Name"),e.xp6(2),e.Q6J("label","street"),e.xp6(2),e.Q6J("label","City"),e.xp6(2),e.Q6J("label","State"),e.xp6(2),e.Q6J("label","Zip Code")}}let F=(()=>{var t;class c{constructor(o,n){this.accountService=o,this.toastr=n}saveUserAddress(){let o=this.checkoutForm?.get("addressForm");this.accountService.updateUserAddress(o?.value).subscribe({next:()=>{this.toastr.success("Address Saved"),o?.reset(o?.value)}})}}return(t=c).\u0275fac=function(o){return new(o||t)(e.Y36(h.B),e.Y36(v._W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-checkout-address"]],inputs:{checkoutForm:"checkoutForm"},decls:8,vars:1,consts:[["class","mt-4",3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between","flex-row","mb-5"],["routerLink","/basket",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-left"],["cdkStepperNext","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-right"],[1,"mt-4",3,"formGroup"],[1,"d-flex.justify-content-between.align-items-center"],[1,"btn","btn-outline-success","mb-3",3,"disabled","click"],["formGroupName","addressForm",1,"row"],[1,"form-group","col-6"],["formControlName","firstName",3,"label"],["formControlName","lastName",3,"label"],["formControlName","street",3,"label"],["formControlName","city",3,"label"],["formControlName","state",3,"label"],["formControlName","zipCode",3,"label"]],template:function(o,n){1&o&&(e.YNc(0,_,19,8,"div",0),e.TgZ(1,"div",1)(2,"button",2)(3,"i",3),e._uU(4,"PREV"),e.qZA()(),e.TgZ(5,"button",4)(6,"i",5),e._uU(7,"NEXT"),e.qZA()()()),2&o&&e.Q6J("ngIf",n.checkoutForm)},dependencies:[d.rH,s.JJ,s.JL,s.sg,s.u,s.x0,x.m,a.st,p.O5]}),c})();var T=i(7398),A=i(5516),S=i(9862);let f=(()=>{var t;class c{constructor(o){this.http=o,this.baseUrl=A.N.apiUrl}CreateOrder(o){return this.http.post(this.baseUrl+"orders",o)}getDeliveryMethod(){return this.http.get(this.baseUrl+"orders/deliveryMethods").pipe((0,T.U)(o=>o.sort((n,u)=>u.price-n.price)))}}return(t=c).\u0275fac=function(o){return new(o||t)(e.LFG(S.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),c})();var k=i(7183);function U(t,c){if(1&t){const r=e.EpF();e.TgZ(0,"div",9)(1,"input",10),e.NdJ("click",function(){const u=e.CHM(r).$implicit,l=e.oxw(2);return e.KtG(l.setShippingPrice(u))}),e.qZA(),e.TgZ(2,"label",11)(3,"strong"),e._uU(4),e.ALo(5,"currency"),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"span",12),e._uU(8),e.qZA()()()}if(2&t){const r=c.$implicit;e.xp6(1),e.s9C("value",r.id),e.s9C("id",r.id),e.xp6(1),e.s9C("for",r.id),e.xp6(2),e.AsE("",r.shortName,"-",e.lcZ(5,6,r.price),""),e.xp6(4),e.Oqu(r.description)}}function J(t,c){if(1&t&&(e.TgZ(0,"div",6)(1,"div",7),e.YNc(2,U,9,8,"div",8),e.qZA()()),2&t){const r=e.oxw();e.Q6J("formGroup",r.checkoutForm),e.xp6(2),e.Q6J("ngForOf",r.deliveryMethods)}}let N=(()=>{var t;class c{constructor(o,n){this.checkoutservice=o,this.basketService=n,this.deliveryMethods=[]}ngOnInit(){this.checkoutservice.getDeliveryMethod().subscribe({next:o=>this.deliveryMethods=o})}setShippingPrice(o){this.basketService.setShipingPrice(o)}}return(t=c).\u0275fac=function(o){return new(o||t)(e.Y36(f),e.Y36(k.v))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-checkout-dilevery"]],inputs:{checkoutForm:"checkoutForm"},decls:8,vars:1,consts:[["class","mt-4",3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between","flex-row","mb-5"],["cdkStepperPrevious","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-left"],["cdkStepperNext","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-right"],[1,"mt-4",3,"formGroup"],["formGroupName","deliveryForm",1,"row"],["class","col-6 form-group",4,"ngFor","ngForOf"],[1,"col-6","form-group"],["type","radio","formControlName","deliveryMethod",1,"form-check-input",3,"value","id","click"],[1,"form-check-label","ms-2","mb-3",3,"for"],[1,"label-description"]],template:function(o,n){1&o&&(e.YNc(0,J,3,2,"div",0),e.TgZ(1,"div",1)(2,"button",2)(3,"i",3),e._uU(4,"PREV"),e.qZA()(),e.TgZ(5,"button",4)(6,"i",5),e._uU(7,"NEXT"),e.qZA()()()),2&o&&e.Q6J("ngIf",n.checkoutForm)},dependencies:[s.Fj,s._,s.JJ,s.JL,s.sg,s.u,s.x0,a.st,a.po,p.sg,p.O5,p.H9]}),c})();var q=i(9384);let M=(()=>{var t;class c{}return(t=c).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-checkout-review"]],decls:9,vars:1,consts:[[1,"mt-4"],[3,"isBasket"],[1,"d-flex","justify-content-between","flex-row","mb-5"],["cdkStepperPrevious","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-left"],["cdkStepperNext","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-right"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-basket-summary",1),e.qZA(),e.TgZ(2,"div",2)(3,"button",3)(4,"i",4),e._uU(5,"PREV"),e.qZA()(),e.TgZ(6,"button",5)(7,"i",6),e._uU(8,"NEXT"),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("isBasket",!1))},dependencies:[a.st,a.po,q.b]}),c})(),O=(()=>{var t;class c{constructor(o,n,u,l){this.basketService=o,this.checkoutService=n,this.toastr=u,this.router=l}submitOrder(){const o=this.basketService.getCurrentBasketValue();if(!o)return;const n=this.getOrderToCreate(o);n&&this.checkoutService.CreateOrder(n).subscribe({next:u=>{this.toastr.success("ORder created successfully"),this.basketService.deleteLocalBasket(),console.log(u),this.router.navigate(["checkout/success"],{state:u})}})}getOrderToCreate(o){const n=this.checkoutForm?.get("deliveryForm")?.get("deliveryMethod")?.value,u=this.checkoutForm?.get("addressForm")?.value;if(n&&u)return{basketId:o.id,DeliveryMethodId:n,ShipToAddress:u}}}return(t=c).\u0275fac=function(o){return new(o||t)(e.Y36(k.v),e.Y36(f),e.Y36(v._W),e.Y36(d.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-checkout-payment"]],inputs:{checkoutForm:"checkoutForm"},decls:9,vars:0,consts:[[1,"d-flex","justify-content-between","flex-row","mb-5"],["cdkStepperPrevious","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-left"],[1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-angle-right"]],template:function(o,n){1&o&&(e.TgZ(0,"p"),e._uU(1,"checkout-payment works!"),e.qZA(),e.TgZ(2,"div",0)(3,"button",1)(4,"i",2),e._uU(5,"PREV"),e.qZA()(),e.TgZ(6,"button",3),e.NdJ("click",function(){return n.submitOrder()}),e.TgZ(7,"i",4),e._uU(8,"Submit Order"),e.qZA()()())},dependencies:[a.po]}),c})();function I(t,c){if(1&t&&(e.TgZ(0,"button",6),e._uU(1,"view your order"),e.qZA()),2&t){const r=e.oxw();e.MGl("routerLink","/order/",r.order.id,"")}}function Q(t,c){1&t&&(e.TgZ(0,"button",7),e._uU(1,"view order list"),e.qZA())}const P=[{path:"",component:(()=>{var t;class c{constructor(o,n){this.fb=o,this.accountService=n,this.checkoutForm=this.fb.group({addressForm:this.fb.group({firstName:["",s.kI.required],lastName:["",s.kI.required],street:["",s.kI.required],city:["",s.kI.required],state:["",s.kI.required],zipCode:["",s.kI.required]}),deliveryForm:this.fb.group({deliveryMethod:["",s.kI.required]}),paymentForm:this.fb.group({nameOnCard:["",s.kI.required]})})}ngOnInit(){this.getAddressFormValues()}getAddressFormValues(){this.accountService.getUserAddress().subscribe({next:o=>{o&&this.checkoutForm.get("addressForm")?.patchValue(o)}})}}return(t=c).\u0275fac=function(o){return new(o||t)(e.Y36(s.qu),e.Y36(h.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-checkout"]],decls:17,vars:11,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-8"],[3,"linerModeSelected"],["appStepper",""],[3,"label","completed"],[3,"checkoutForm"],[3,"label"],[1,"col-4"]],template:function(o,n){if(1&o&&(e.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"div",2)(4,"app-stepper",3,4)(6,"cdk-step",5),e._UZ(7,"app-checkout-address",6),e.qZA(),e.TgZ(8,"cdk-step",5),e._UZ(9,"app-checkout-dilevery",6),e.qZA(),e.TgZ(10,"cdk-step",7),e._UZ(11,"app-checkout-review"),e.qZA(),e.TgZ(12,"cdk-step",5),e._UZ(13,"app-checkout-payment",6),e.qZA()()(),e.TgZ(14,"div",8),e._UZ(15,"app-order-total"),e.qZA()()()(),e._uU(16,">")),2&o){let u,l,C;e.xp6(4),e.Q6J("linerModeSelected",!1),e.xp6(2),e.Q6J("label","Address")("completed",null==(u=n.checkoutForm.get("addressForm"))?null:u.valid),e.xp6(1),e.Q6J("checkoutForm",n.checkoutForm),e.xp6(1),e.Q6J("label","Dilevery")("completed",null==(l=n.checkoutForm.get("deliveryForm"))?null:l.valid),e.xp6(1),e.Q6J("checkoutForm",n.checkoutForm),e.xp6(1),e.Q6J("label","Review"),e.xp6(2),e.Q6J("label","Payment")("completed",null==(C=n.checkoutForm.get("paymentForm"))?null:C.valid),e.xp6(1),e.Q6J("checkoutForm",n.checkoutForm)}},dependencies:[g.V,y,a.be,F,N,M,O]}),c})()},{path:"success",component:(()=>{var t;class c{constructor(o){this.router=o;let n=this.router.getCurrentNavigation();this.order=n?.extras?.state}viewCustomerOrder(){let o=this.router.getCurrentNavigation();this.order=o?.extras?.state}}return(t=c).\u0275fac=function(o){return new(o||t)(e.Y36(d.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-checkout-success"]],decls:9,vars:2,consts:[[1,"mt-5","container"],[1,"i"],[1,"fa","fa-check-circle","fa-5x",2,"color","green"],[1,"mb-4"],["class","btn btn-outline-success",3,"routerLink",4,"ngIf"],["routerLink","/order","class","btn btn-outline-success",4,"ngIf"],[1,"btn","btn-outline-success",3,"routerLink"],["routerLink","/order",1,"btn","btn-outline-success"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"h2"),e._uU(4," Thank you your order is Confirmed"),e.qZA(),e.TgZ(5,"p",3),e._uU(6,"your order has not shipped yet, but this is not excepted we are not real "),e.qZA(),e.YNc(7,I,2,1,"button",4),e.YNc(8,Q,2,0,"button",5),e.qZA()),2&o&&(e.xp6(7),e.Q6J("ngIf",n.order),e.xp6(1),e.Q6J("ngIf",!n.order))},dependencies:[d.rH,p.O5]}),c})()}];let Y=(()=>{var t;class c{}return(t=c).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(P),d.Bz]}),c})();var B=i(6208);let E=(()=>{var t;class c{}return(t=c).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[Y,B.m,p.ez]}),c})()}}]);